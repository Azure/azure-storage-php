<html>
    <head>
        <script
            type="text/javascript"
            src="../../../js/jquery-1.4.2.min.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shCore.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushJScript.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushPhp.js">
        </script>
        <script
            type="text/javascript"
            src="../../../syntax_highlighter/scripts/shBrushXml.js">
        </script>
        <link
            href="../../../syntax_highlighter/styles/shCore.css" rel="stylesheet"
            type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shCoreEclipse.css"
            rel="stylesheet" type="text/css"
        />
        <link
            href="../../../syntax_highlighter/styles/shThemeWordpress.css"
            rel="stylesheet" type="text/css"
        />
    </head>
    <body>
        <pre class="brush: php">&lt;?php

/**
 * LICENSE: The MIT License (the &quot;License&quot;)
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * https://github.com/azure/azure-storage-php/LICENSE
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * PHP version 5
 *
 * @category  Microsoft
 * @package   MicrosoftAzure\Storage\Common\Models
 * @author    Azure Storage PHP SDK &lt;dmsh@microsoft.com&gt;
 * @copyright 2016 Microsoft Corporation
 * @license   https://github.com/azure/azure-storage-php/LICENSE
 * @link      https://github.com/azure/azure-storage-php
 */
 
namespace MicrosoftAzure\Storage\Common\Models;

use MicrosoftAzure\Storage\Common\Internal\Utilities;
use MicrosoftAzure\Storage\Common\Internal\Resources;
use MicrosoftAzure\Storage\Common\Models\Logging;
use MicrosoftAzure\Storage\Common\Models\Metrics;
use MicrosoftAzure\Storage\Common\Models\CORS;
use MicrosoftAzure\Storage\Common\Internal\Serialization\XmlSerializer;

/**
 * Encapsulates service properties
 *
 * @category  Microsoft
 * @package   MicrosoftAzure\Storage\Common\Models
 * @author    Azure Storage PHP SDK &lt;dmsh@microsoft.com&gt;
 * @copyright 2016 Microsoft Corporation
 * @license   https://github.com/azure/azure-storage-php/LICENSE
 * @link      https://github.com/azure/azure-storage-php
 */
class ServiceProperties
{
    private $logging;
    private $hourMetrics;
    private $minuteMetrics;
    private $corses;
    private $defaultServiceVersion;
    
    private static $xmlRootName = 'StorageServiceProperties';
    
    /**
     * Creates ServiceProperties object from parsed XML response.
     *
     * @internal
     * @param array $parsedResponse XML response parsed into array.
     *
     * @return ServiceProperties.
     */
    public static function create(array $parsedResponse)
    {
        $result = new ServiceProperties();

        if (array_key_exists(Resources::XTAG_DEFAULT_SERVICE_VERSION, $parsedResponse) &amp;&amp;
            $parsedResponse[Resources::XTAG_DEFAULT_SERVICE_VERSION] != null) {
            $result-&gt;setDefaultServiceVersion($parsedResponse[Resources::XTAG_DEFAULT_SERVICE_VERSION]);
        }

        if (array_key_exists(Resources::XTAG_LOGGING, $parsedResponse)) {
            $result-&gt;setLogging(Logging::create($parsedResponse[Resources::XTAG_LOGGING]));
        }
        $result-&gt;setHourMetrics(Metrics::create($parsedResponse[Resources::XTAG_HOUR_METRICS]));
        if (array_key_exists(Resources::XTAG_MINUTE_METRICS, $parsedResponse)) {
            $result-&gt;setMinuteMetrics(Metrics::create($parsedResponse[Resources::XTAG_MINUTE_METRICS]));
        }
        if (array_key_exists(Resources::XTAG_CORS, $parsedResponse) &amp;&amp;
            $parsedResponse[Resources::XTAG_CORS] != null) {
            //There could be multiple CORS rules, so need to extract them all.
            $corses = array();
            $corsArray =
                $parsedResponse[Resources::XTAG_CORS][Resources::XTAG_CORS_RULE];
            if (count(array_filter(array_keys($corsArray), 'is_string')) &gt; 0) {
                //single cors rule
                $corses[] = CORS::create($corsArray);
            } else {
                //multiple cors rule
                foreach ($corsArray as $cors) {
                    $corses[] = CORS::create($cors);
                }
            }
            
            $result-&gt;setCorses($corses);
        } else {
            $result-&gt;setCorses(array());
        }

        return $result;
    }
    
    /**
     * Gets logging element.
     *
     * @return Logging
     */
    public function getLogging()
    {
        return $this-&gt;logging;
    }
    
    /**
     * Sets logging element.
     *
     * @param Logging $logging new element.
     *
     * @return void
     */
    public function setLogging(Logging $logging)
    {
        $this-&gt;logging = clone $logging;
    }
    
    /**
     * Gets hour metrics element.
     *
     * @return Metrics
     */
    public function getHourMetrics()
    {
        return $this-&gt;hourMetrics;
    }
    
    /**
     * Sets hour metrics element.
     *
     * @param Metrics $metrics new element.
     *
     * @return void
     */
    public function setHourMetrics(Metrics $hourMetrics)
    {
        $this-&gt;hourMetrics = clone $hourMetrics;
    }
    
    /**
     * Gets minute metrics element.
     *
     * @return Metrics
     */
    public function getMinuteMetrics()
    {
        return $this-&gt;minuteMetrics;
    }
    
    /**
     * Sets minute metrics element.
     *
     * @param Metrics $metrics new element.
     *
     * @return void
     */
    public function setMinuteMetrics(Metrics $minuteMetrics)
    {
        $this-&gt;minuteMetrics = clone $minuteMetrics;
    }

    /**
     * Gets corses element.
     *
     * @return CORS[]
     */
    public function getCorses()
    {
        return $this-&gt;corses;
    }
    
    /**
     * Sets corses element.
     *
     * @param CORS[] $corses new elements.
     *
     * @return void
     */
    public function setCorses(array $corses)
    {
        $this-&gt;corses = $corses;
    }

    /**
     * Gets the default service version.
     *
     * @return string
     */
    public function getDefaultServiceVersion()
    {
        return $this-&gt;defaultServiceVersion;
    }

    /**
     * Sets the default service version. This can obly be set for the blob service.
     *
     * @param string $defaultServiceVersion the default service version
     *
     * @return void
     */
    public function setDefaultServiceVersion($defaultServiceVersion)
    {
        return $this-&gt;defaultServiceVersion = $defaultServiceVersion;
    }
    
    /**
     * Converts this object to array with XML tags
     *
     * @internal
     * @return array
     */
    public function toArray()
    {
        $result = array();

        if (!empty($this-&gt;getLogging())) {
            $result[Resources::XTAG_LOGGING] =
                    $this-&gt;getLogging()-&gt;toArray();
        }

        if (!empty($this-&gt;getHourMetrics())) {
            $result[Resources::XTAG_HOUR_METRICS] =
                    $this-&gt;getHourMetrics()-&gt;toArray();
        }

        if (!empty($this-&gt;getMinuteMetrics())) {
            $result[Resources::XTAG_MINUTE_METRICS] =
                    $this-&gt;getMinuteMetrics()-&gt;toArray();
        }

        $corsesArray = $this-&gt;getCorsesArray();
        if (!empty($corsesArray)) {
            $result[Resources::XTAG_CORS] =$corsesArray;
        }

        if ($this-&gt;defaultServiceVersion != null) {
            $result[Resources::XTAG_DEFAULT_SERVICE_VERSION] = $this-&gt;defaultServiceVersion;
        }

        return $result;
    }

    /**
     * Gets the array that contains all the CORSes.
     *
     * @return array
     */
    private function getCorsesArray()
    {
        $corsesArray = array();
        if (count($this-&gt;getCorses()) == 1) {
            $corsesArray = array(
                Resources::XTAG_CORS_RULE =&gt; $this-&gt;getCorses()[0]-&gt;toArray()
            );
        } elseif ($this-&gt;getCorses() != array()) {
            foreach ($this-&gt;getCorses() as $cors) {
                $corsesArray[] = [Resources::XTAG_CORS_RULE =&gt; $cors-&gt;toArray()];
            }
        }
        
        return $corsesArray;
    }
    
    /**
     * Converts this current object to XML representation.
     *
     * @internal
     * @param XmlSerializer $xmlSerializer The XML serializer.
     *
     * @return string
     */
    public function toXml(XmlSerializer $xmlSerializer)
    {
        $properties = array(XmlSerializer::ROOT_NAME =&gt; self::$xmlRootName);
        return $xmlSerializer-&gt;serialize($this-&gt;toArray(), $properties);
    }
}
</pre>
        <script type="text/javascript">
             SyntaxHighlighter.all();
             jQuery('.gutter div').each(function(key, data){
                jQuery(data).prepend('<a name="L'+jQuery(data).text()+'"/>');
             });
        </script>
    </body>
</html>